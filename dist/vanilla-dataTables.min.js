/*!
 *
 * Vanilla-DataTables
 * Copyright (c) 2015-2017 Karl Saunders (http://mobius.ovh)
 * Licensed under MIT (http://www.opensource.org/licenses/mit-license.php)
 *
 * Version: 2.0.0-alpha.9
 *
 */
!function(e,t){var n="DataTable";"function"==typeof define&&define.amd?define([],t(n)):"object"==typeof exports?module.exports=t(n):e[n]=t(n)}(this,function(e){"use strict";var t=window,n=document,s=n.body,a={perPage:10,perPageSelect:[5,10,15,20,25],sortable:!0,searchable:!0,nextPrev:!0,firstLast:!1,prevText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",ellipsisText:"&hellip;",ascText:"▴",descText:"▾",truncatePager:!0,pagerDelta:2,fixedColumns:!0,fixedHeight:!1,header:!0,footer:!1,search:{includeHiddenColumns:!1},classes:{table:"dataTable-table",wrapper:"dataTable-wrapper",container:"dataTable-container",top:"dataTable-top",bottom:"dataTable-bottom",info:"dataTable-info",dropdown:"dataTable-dropdown",selector:"dataTable-selector",pagination:"dataTable-pagination",input:"dataTable-input",search:"dataTable-search",ellipsis:"dataTable-ellipsis",sorter:"dataTable-sorter"},labels:{placeholder:"Search...",perPage:"{select} entries per page",noRows:"No entries found",info:"Showing {start} to {end} of {rows} entries"},layout:{top:"{select}{search}",bottom:"{info}{pager}"}},i=function(e){return"[object Object]"===Object.prototype.toString.call(e)},o=function(e){return Array.isArray(e)},r=function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var s=t[n];s&&i(s)?(e[n]=e[n]||{},r(e[n],s)):e[n]=s}return e},l=function(e,t,n){var s;if(i(e))for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(n,e[s],s);else if(o(e))for(s=0;s<e.length;s++)t.call(n,e[s],s);else for(s=0;s<e;s++)t.call(n,s+1,s)},c=function(e,t){var s=n.createElement(e);if(t&&"object"==typeof t){var a;for(a in t)"html"===a?s.innerHTML=t[a]:a in s?s[a]=t[a]:s.setAttribute(a,t[a])}return s},d=function(e,t,n){e.addEventListener(t,n,!1)},h=function(e,t){if(t)for(;e.hasChildNodes();)e.removeChild(e.lastChild);else e.innerHTML=""},p={add:function(e,t){e.classList?e.classList.add(t):p.contains(e,t)||(e.className=e.className.trim()+" "+t)},remove:function(e,t){e.classList?e.classList.remove(t):p.contains(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," "))},contains:function(e,t){if(e)return e.classList?e.classList.contains(t):!!e.className&&!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},u=function(e,t,n){return c("li",{class:e,html:'<a href="#" data-page="'+t+'">'+n+"</a>"})},f=function(e,n){var s=!1;if(n&&t.moment)switch(n){case"ISO_8601":s=moment(e,moment.ISO_8601).format("YYYYMMDD");break;case"RFC_2822":s=moment(e,"ddd, MM MMM YYYY HH:mm:ss ZZ").format("YYYYMMDD");break;case"MYSQL":s=moment(e,"YYYY-MM-DD hh:mm:ss").format("YYYYMMDD");break;case"UNIX":s=moment(e).unix();break;default:s=moment(e,n).format("YYYYMMDD")}return s},g=function(e,t){this.node=e,this.content=e.innerHTML,this.hidden=!1,this.index=this.node.dataIndex=t};g.prototype.setContent=function(e){this.originalContent=this.content,this.content=this.node.innerHTML=e};var b=function(e,t){o(e)?(this.node=c("tr"),l(e,function(e,t){this.node.appendChild(c("td",{html:e}))},this)):(this.node=e,this.isHeader="THEAD"===e.parentNode.nodeName),this.isHeader||(this.index=this.node.dataIndex=t-1),this.cells=[].slice.call(this.node.cells).map(function(e,t){return new g(e,t,this)},this)},m=function(e,t,n){this.node=e,"string"==typeof e&&(this.node=document.querySelector(e)),t&&this.build(t),this.rows=[].slice.call(this.node.rows).map(function(e,t){return new b(e,t,this)},this),this.body=this.node.tBodies[0],this.body||(this.body=c("tbody"),this.node.appendChild(this.body)),this.rows.length&&(this.rows[0].isHeader?(this.hasHeader=!0,this.header=this.rows[0],this.rows.shift(),n.config.sortable&&l(this.header.cells,function(e){p.add(e.node,n.config.classes.sorter)})):this.addHeader())};m.prototype.build=function(e){var t=!1,n=!1;if(e.headings){t=c("thead");var s=c("tr");l(e.headings,function(e){var t=c("th",{html:e});s.appendChild(t)}),t.appendChild(s)}e.data&&e.data.length&&(n=c("tbody"),l(e.data,function(e){var t=c("tr");l(e,function(e){var n=c("td",{html:e});t.appendChild(n)}),n.appendChild(t)})),t&&(null!==this.node.tHead&&this.node.removeChild(this.node.tHead),this.node.appendChild(t)),n&&(this.node.tBodies.length&&this.node.removeChild(this.node.tBodies[0]),this.node.appendChild(n))},m.prototype.addHeader=function(){var e=c("thead"),t=c("tr");l(this.rows[0].cells,function(e){t.appendChild(c("td"))}),e.appendChild(t),this.header=new b(t,1),this.hasHeader=!0},m.prototype.addRow=function(e,t,n){if(e instanceof b)return this.rows.splice(t||0,0,e),this.hasHeader||this.addHeader(),n&&this.update(),e},m.prototype.removeRow=function(e,t){e instanceof b&&(this.rows.splice(this.rows.indexOf(e),1),t&&this.update())},m.prototype.update=function(e){l(this.rows,function(e,t){e.index=t})};var v=function(e,t){this.instance=e,this.parent=t};v.prototype.render=function(e){var t=this,n=t.instance,s=n.config;if(e=e||n.totalPages,h(t.parent,t.isIE),e>1){var a="pager",i=c("ul"),o=n.onFirstPage?1:n.currentPage-1,r=n.onlastPage?e:n.currentPage+1;s.firstLast&&i.appendChild(u(a,1,s.firstText)),s.nextPrev&&i.appendChild(u(a,o,s.prevText));var d=this.truncate();l(d,function(e){i.appendChild(e)}),s.nextPrev&&i.appendChild(u(a,r,s.nextText)),s.firstLast&&i.appendChild(u(a,e,s.lastText)),t.parent.appendChild(i)}},v.prototype.truncate=function(){var e,t=this,n=t.instance.config,s=2*n.pagerDelta,a=t.instance.currentPage,i=a-n.pagerDelta,o=a+n.pagerDelta,r=t.instance.totalPages,c=[],d=[];if(n.truncatePager){a<4-n.pagerDelta+s?o=3+s:a>r-(3-n.pagerDelta+s)&&(i=r-(2+s));for(var h=1;h<=r;h++)(1==h||h==r||h>=i&&h<=o)&&c.push(h);l(c,function(t){e&&(t-e==2?d.push(u("",e+1,e+1)):t-e!=1&&d.push(u(n.classes.ellipsis,0,n.ellipsisText))),d.push(u(t==a?"active":"",t,t)),e=t})}else l(r,function(e){d.push(u(e==a?"active":"",e,e))});return d};var w=function(e){this.instance=e};w.prototype.render=function(e){var t=this.instance;if(e=e||t.currentPage,h(t.table.body),!(e<1||e>t.totalPages)){var n=t.table.header,s=document.createDocumentFragment();t.table.hasHeader&&(h(n.node),l(n.cells,function(e){e.hidden||n.node.appendChild(e.node)})),t.pages.length&&l(t.pages[e-1],function(e){h(e.node),l(e.cells,function(t){t.hidden||e.node.appendChild(t.node)}),s.append(e.node)}),t.table.body.appendChild(s),l(t.pagers,function(e){e.render()}),t.getInfo()}},w.prototype.paginate=function(){var e=this.instance.config,t=this.instance.table.rows,n=this.instance;n.searching&&n.searchData&&(t=n.searchData),n.pages=t.map(function(n,s){return s%e.perPage==0?t.slice(s,s+e.perPage):null}).filter(function(e){return e}),n.totalPages=n.pages.length},w.prototype.add=function(e,t){if(o(e))return t=t||0,o(e[0])?(l(e,function(e){e=this.instance.table.addRow(new b(e,this.instance.table.rows.length+1),t)},this),this.instance.table.update()):e=this.instance.table.addRow(new b(e,this.instance.table.rows.length+1),t,!0),this.instance.update(),e},w.prototype.remove=function(e){var t=!1,n=this.instance;if(o(e)){for(var s=e.length-1;s>=0;s--)n.table.removeRow(this.get(e[s]));n.table.update(),n.update()}else if(t=this.get(e))return n.table.removeRow(t,!0),n.update(),t},w.prototype.get=function(e){var t=this.instance.table.rows;if(e instanceof b||e instanceof Element){for(var n=0;n<t.length;n++)if(t[n].node===e||t[n]===e){e=t[n];break}}else e=t[e];return e};var y=function(e){this.instance=e};y.prototype.sort=function(e,t){var n=this.instance;if(e=e||0,t=t||(t=n.lastDirection&&"asc"===n.lastDirection?"desc":"asc"),e<0||e>n.table.header.cells.length-1)return!1;var s=n.table.header.cells[e].node,a=n.table.rows;n.searching&&n.searchData&&(a=n.searchData),n.lastHeading&&p.remove(n.lastHeading,n.lastDirection),n.lastDirection&&p.remove(s,n.lastDirection),p.add(s,t);var i,o;"date"===s.getAttribute("data-type")&&(i=!1,(o=s.hasAttribute("data-format"))&&(i=s.getAttribute("data-format"))),a.sort(function(n,s){return n=n.cells[e].content,s=s.cells[e].content,o?(n=f(parseInt(n,10),i),s=f(parseInt(s,10),i)):(n=n.replace(/(\$|\,|\s|%)/g,""),s=s.replace(/(\$|\,|\s|%)/g,"")),"asc"===t?n>s:n<s}),n.update(),n.lastHeading=s,n.lastDirection=t},y.prototype.order=function(e){var t,n=this.instance,s=n.table.header,a=n.table.rows;n.table.hasHeader&&(t=[],l(e,function(e,n){t[n]=s.cells[e],s.node.appendChild(s.cells[e].node)}),s.cells=t),l(a,function(n){t=[],l(e,function(e,s){t[s]=n.cells[e],n.node.appendChild(n.cells[e].node)}),n.cells=t}),n.update()},y.prototype.hide=function(e){var t=this.instance,n=t.table.header,s=t.table.rows;isNaN(e)||(e=[e]);for(var a=0;a<e.length;a++)l(n.cells,function(t){e[a]==t.index&&(t.hidden=!0)}),l(s,function(t){l(t.cells,function(t){e[a]==t.index&&(t.hidden=!0)})});this.instance.update()},y.prototype.show=function(e){var t=this.instance,n=t.table.header,s=t.table.rows;isNaN(e)||(e=[e]);for(var a=0;a<e.length;a++)l(n.cells,function(t){e[a]==t.index&&(t.hidden=!1)}),l(s,function(t){l(t.cells,function(t){e[a]==t.index&&(t.hidden=!1)})});this.instance.update()},y.prototype.visible=function(e){var t,n=this.instance.table.header;return void 0===e&&(e=n.cells.map(function(e){return e.index})),isNaN(e)?o(e)&&(t=[],l(e,function(e){t.push(!n.cells[e].hidden)})):t=!n.cells[e].hidden,t},y.prototype.fix=function(){l(this.instance.columnWidths,function(e,t){var n=e/this.instance.rect.width*100;this.instance.table.header.cells[t].node.style.width=n+"%"},this)};var x=function(e){this.config=e,this.request=new XMLHttpRequest,d(this.request,"load",this.load.bind(this)),d(this.request,"error",this.error.bind(this)),d(this.request,"abort",this.abort.bind(this)),d(this.request,"progress",this.progress.bind(this))};x.prototype.send=function(){this.request.open("GET",this.config.url),this.request.send()},x.prototype.load=function(){4===this.request.readyState&&200===this.request.status&&this.config.load&&"function"==typeof this.config.load&&this.config.load.call(this)},x.prototype.error=function(){},x.prototype.abort=function(){},x.prototype.progress=function(){};var C=function(e){this.config={download:!0,skipColumns:[],lineDelimiter:"\n",columnDelimiter:",",tableName:"myTable",replacer:null,space:4},this.instance=e};C.prototype.export=function(e){switch(e&&i(e)&&(this.config=r(this.config,e)),this.config.type.toLowerCase()){case"json":this.toJSON();break;case"sql":this.toSQL();break;case"csv":this.toCSV()}},C.prototype.toJSON=function(e){e&&i(e)&&(this.config=r(this.config,e)),this.config.type="json";var t="",n=[],s=this.config,a=this.instance.table;return l(a.rows,function(e,t){n[t]=n[t]||{},l(e.cells,function(e,i){!e.hidden&&s.skipColumns.indexOf(e.index)<0&&(n[t][a.header.cells[e.index].content]=a.rows[t].cells[e.index].content)})}),t=JSON.stringify(n,s.replacer,s.space),s.download&&(this.string="data:application/json;charset=utf-8,"+t,this.download()),t},C.prototype.toCSV=function(e){e&&i(e)&&(this.config=r(this.config,e)),this.config.type="csv";var t="",n=[],s=this.config,a=this.instance.table;l(a.rows,function(e,a){n[a]=n[a]||{},l(e.cells,function(e,n){!e.hidden&&s.skipColumns.indexOf(e.index)<0&&(t+=e.content+s.columnDelimiter)}),t=t.trim().substring(0,t.length-1),t+=s.lineDelimiter}),t=t.trim().substring(0,t.length-1),s.download&&(this.string="data:text/csv;charset=utf-8,"+t,this.download())},C.prototype.toSQL=function(e){e&&i(e)&&(this.config=r(this.config,e)),this.config.type="sql";var t=this.config,n=this.instance.table,s="INSERT INTO `"+t.tableName+"` (";return l(n.header.cells,function(e){!e.hidden&&t.skipColumns.indexOf(e.index)<0&&(s+="`"+e.content+"`,")}),s=s.trim().substring(0,s.length-1),s+=") VALUES ",l(n.rows,function(e){s+="(",l(e.cells,function(e){!e.hidden&&t.skipColumns.indexOf(e.index)<0&&(s+="`"+e.content+"`,")}),s=s.trim().substring(0,s.length-1),s+="),"}),s=s.trim().substring(0,s.length-1),s+=";",t.download&&(this.string="data:application/sql;charset=utf-8,"+s,this.download()),s},C.prototype.download=function(e){if(this.string){this.config.filename=this.config.filename||"datatable_export",this.config.filename+="."+this.config.type,this.string=encodeURI(this.string);var t=c("a");t.href=this.string,t.download=this.config.filename,s.appendChild(t),t.click(),s.removeChild(t)}};var T=function(e,t){if(this.config=r(a,t),this.config.ajax){var n=this;this.request=new x({url:"string"==typeof ajax?n.config.ajax:n.config.ajax.url,load:function(){var t={};t.data=n.config.ajax.load?n.config.ajax.load.call(n,this.request):this.request.responseText,t.type="json",n.config.ajax.content&&n.config.ajax.content.type&&(t.type=n.config.ajax.content.type,t=r(t,n.config.ajax.content)),n.table=new m(e,t.data,n),n.init()}}),this.request.send()}else this.config.data?this.table=new m(e,this.config.data,this):this.table=new m(e,!1,this),this.init()};return T.prototype.init=function(){if(!this.initialised){e=this;this.isIE=!!/(msie|trident)/i.test(navigator.userAgent),this.currentPage=1,this.rows().paginate(),this.totalPages=this.pages.length,this.render(),this.config.fixedColumns&&this.columns().fix(),e.config.columns&&(e.selectedColumns=[],e.columnRenderers=[],l(e.config.columns,function(t){o(t.select)||(t.select=[t.select]),t.hasOwnProperty("render")&&"function"==typeof t.render&&(e.selectedColumns=e.selectedColumns.concat(t.select),e.columnRenderers.push({columns:t.select,renderer:t.render})),e.table.hasHeader&&l(t.select,function(n){var s=e.table.header.cells[n].node;t.type&&s.setAttribute("data-type",t.type),t.format&&s.setAttribute("data-format",t.format),t.hasOwnProperty("sortable")&&s.setAttribute("data-sortable",t.sortable),t.hasOwnProperty("hidden")&&!1!==t.hidden&&e.columns().hide(n),t.hasOwnProperty("sort")&&1===t.select.length&&e.columns().sort(t.select[0],t.sort)})}),e.selectedColumns.length&&l(e.table.rows,function(t){l(t.cells,function(n){e.selectedColumns.indexOf(n.index)>-1&&l(e.columnRenderers,function(s){s.columns.indexOf(n.index)>-1&&n.setContent(s.renderer.call(e,n.content,n,t))})})})),this.rows().render(),this.bindEvents(),this.initialised=!0;var e=this;setTimeout(function(){e.emit("datatable.init")},10)}},T.prototype.bindEvents=function(){var e=this,t=e.config;d(this.wrapper,"click",function(n){var s=n.target;if(s.hasAttribute("data-page")&&(n.preventDefault(),e.page(parseInt(s.getAttribute("data-page"),10))),t.sortable&&"TH"===s.nodeName){if(s.hasAttribute("data-sortable")&&"false"===s.getAttribute("data-sortable"))return!1;n.preventDefault(),e.columns().sort(s.dataIndex,p.contains(s,"asc")?"desc":"asc")}}),t.perPageSelect&&d(this.wrapper,"change",function(n){"SELECT"===n.target.nodeName&&p.contains(n.target,t.classes.selector)&&(n.preventDefault(),e.config.perPage=parseInt(n.target.value,10),e.update())}),t.searchable&&d(this.wrapper,"keyup",function(n){"INPUT"===n.target.nodeName&&p.contains(n.target,t.classes.input)&&(n.preventDefault(),e.search(n.target.value))}),t.sortable&&d(this.wrapper,"mousedown",function(e){"TH"===e.target.nodeName&&e.preventDefault()})},T.prototype.render=function(){if(!this.rendered){var e=this,t=e.config;this.table.hasHeader&&t.fixedColumns&&(this.columnWidths=this.table.header.cells.map(function(e){return e.node.offsetWidth})),e.wrapper=c("div",{class:t.classes.wrapper});var n=["<div class='",t.classes.top,"'>",t.layout.top,"</div>","<div class='",t.classes.container,"'></div>","<div class='",t.classes.bottom,"'>",t.layout.bottom,"</div>"].join("");if(n=n.replace("{info}","<div class='"+t.classes.info+"'></div>"),t.perPageSelect){var s=["<div class='",t.classes.dropdown,"'>","<label>",t.labels.perPage,"</label>","</div>"].join(""),a=c("select",{class:t.classes.selector});l(t.perPageSelect,function(e){var n=e===t.perPage,s=new Option(e,e,n,n);a.add(s)}),s=s.replace("{select}",a.outerHTML),n=n.replace("{select}",s)}else n=n.replace("{select}","");if(t.searchable){var i=["<div class='",t.classes.search,"'>","<input class='",t.classes.input,"' placeholder='",t.labels.placeholder,"' type='text'>","</div>"].join("");n=n.replace("{search}",i)}else n=n.replace("{search}","");e.table.node.classList.add(t.classes.table),l(n.match(/\{pager\}/g),function(e,s){n=n.replace("{pager}",c("div",{class:t.classes.pagination}).outerHTML)}),e.wrapper.innerHTML=n,e.pagers=[].slice.call(e.wrapper.querySelectorAll("."+t.classes.pagination)),l(e.pagers,function(t,n){e.pagers[n]=new v(e,t)}),e.container=e.wrapper.querySelector("."+t.classes.container),e.labels=e.wrapper.querySelectorAll("."+t.classes.info),e.table.node.parentNode.replaceChild(e.wrapper,e.table.node),e.container.appendChild(e.table.node),e.rect=e.table.node.getBoundingClientRect(),e.rendered=!0}},T.prototype.update=function(){this.rows().paginate(),this.rows().render(),this.emit("datatable.update")},T.prototype.getInfo=function(){var e,t=0,n=0,s=0;if(this.totalPages&&(s=(n=(t=this.currentPage-1)*this.config.perPage)+this.pages[t].length,n+=1,e=this.searching?this.searchData.length:this.table.rows.length),this.labels.length&&this.config.labels.info.length){var a=this.config.labels.info.replace("{start}",n).replace("{end}",s).replace("{page}",this.currentPage).replace("{pages}",this.totalPages).replace("{rows}",e);l([].slice.call(this.labels),function(t){t.innerHTML=e?a:""})}},T.prototype.search=function(e){var t=this;if(e=e.toLowerCase(),t.currentPage=1,t.searching=!0,t.searchData=[],!e.length)return t.searching=!1,p.remove(t.wrapper,"search-results"),t.update(),!1;l(t.table.rows,function(n,s){var a=t.searchData.indexOf(n)>-1;e.split(" ").reduce(function(e,s){for(var a=!1,i=0;i<n.cells.length;i++)if(n.cells[i].content.toLowerCase().indexOf(s)>-1){(!n.cells[i].hidden||n.cells[i].hidden&&t.config.search.includeHiddenColumns)&&(a=!0);break}return e&&a},!0)&&!a&&t.searchData.push(n)}),p.add(t.wrapper,"search-results"),t.searchData.length?t.update():(p.remove(t.wrapper,"search-results"),t.setMessage(t.config.labels.noRows)),this.emit("datatable.search",e,this.searchData)},T.prototype.page=function(e){return e!=this.currentPage&&(isNaN(e)||(this.currentPage=parseInt(e,10)),!(e>this.pages.length||e<0)&&(this.rows().render(e),void this.emit("datatable.page",e)))},T.prototype.setMessage=function(e){var t=1;this.table.rows.length&&(t=this.table.rows[0].cells.length);var n=c("tr",{html:'<td class="dataTables-empty" colspan="'+t+'">'+e+"</td>"});h(this.table.body),this.table.body.appendChild(n)},T.prototype.columns=function(){return new y(this)},T.prototype.rows=function(){return new w(this)},T.prototype.exporter=function(e){return new C(this)},T.prototype.on=function(e,t){this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t)},T.prototype.off=function(e,t){this.events=this.events||{},e in this.events!=!1&&this.events[e].splice(this.events[e].indexOf(t),1)},T.prototype.emit=function(e){if(this.events=this.events||{},e in this.events!=!1)for(var t=0;t<this.events[e].length;t++)this.events[e][t].apply(this,Array.prototype.slice.call(arguments,1))},T.prototype.destroy=function(){var e=this,t=e.config,s=e.table;p.remove(s.node,t.classes.table),l(s.header.cells,function(e){e.node.style.width="",p.remove(e.node,t.classes.sorter)});var a=n.createDocumentFragment();h(s.body),l(s.rows,function(e){a.appendChild(e.node)}),s.body.appendChild(a),this.wrapper.parentNode.replaceChild(s.node,this.wrapper),this.rendered=!1,this.initialised=!1},T});