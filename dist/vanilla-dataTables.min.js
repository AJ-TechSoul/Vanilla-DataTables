/*!
 *
 * Vanilla-DataTables
 * Copyright (c) 2015-2017 Karl Saunders (http://mobius.ovh)
 * Licensed under MIT (http://www.opensource.org/licenses/mit-license.php)
 *
 * Version: 2.0.0-alpha.17
 *
 */
!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.DataTable=t()}("undefined"!=typeof global?global:this.window||this.global,function(){"use strict";var e=window,t=document,n=(t.body,{perPage:10,perPageSelect:[5,10,15,20,25],sortable:!0,searchable:!0,nextPrev:!0,firstLast:!1,prevText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",ellipsisText:"&hellip;",ascText:"▴",descText:"▾",truncatePager:!0,pagerDelta:2,fixedColumns:!0,fixedHeight:!1,header:!0,footer:!1,search:{includeHiddenColumns:!1},classes:{table:"dataTable-table",wrapper:"dataTable-wrapper",container:"dataTable-container",top:"dataTable-top",bottom:"dataTable-bottom",info:"dataTable-info",dropdown:"dataTable-dropdown",selector:"dataTable-selector",pagination:"dataTable-pagination",input:"dataTable-input",search:"dataTable-search",ellipsis:"dataTable-ellipsis",sorter:"dataTable-sorter"},labels:{placeholder:"Search...",perPage:"{select} entries per page",noRows:"No entries found",info:"Showing {start} to {end} of {rows} entries"},layout:{top:"{select}{search}",bottom:"{info}{pager}"}}),a=function(e){return"[object Object]"===Object.prototype.toString.call(e)},s=function(e){return Array.isArray(e)},i=function(e){var t=!1;try{t=JSON.parse(e)}catch(e){return!1}return!(null===t||!s(t)&&!a(t))&&t},r=function(e,t){return e.hasOwnProperty(t)},o=function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var s=t[n];s&&a(s)?(e[n]=e[n]||{},o(e[n],s)):e[n]=s}return e},l=function(e,t,n){var i;if(a(e))for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(n,e[i],i);else if(s(e))for(i=0;i<e.length;i++)t.call(n,e[i],i);else for(i=0;i<e;i++)t.call(n,i+1,i)},d=function(e,n){var a=t.createElement(e);if(n&&"object"==typeof n){var s;for(s in n)"html"===s?a.innerHTML=n[s]:s in a?a[s]=n[s]:a.setAttribute(s,n[s])}return a},c=function(e,t,n){e.addEventListener(t,n,!1)},h=function(e,t){if(t)for(;e.hasChildNodes();)e.removeChild(e.lastChild);else e.innerHTML=""},u={add:function(e,t){e.classList?e.classList.add(t):u.contains(e,t)||(e.className=e.className.trim()+" "+t)},remove:function(e,t){e.classList?e.classList.remove(t):u.contains(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," "))},contains:function(e,t){if(e)return e.classList?e.classList.contains(t):!!e.className&&!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},p=function(t,n){var a=!1;if(n&&e.moment)switch(n){case"ISO_8601":a=moment(t,moment.ISO_8601).format("YYYYMMDD");break;case"RFC_2822":a=moment(t,"ddd, DD MMM YYYY HH:mm:ss ZZ").format("YYYYMMDD");break;case"MYSQL":a=moment(t,"YYYY-MM-DD hh:mm:ss").format("YYYYMMDD");break;case"UNIX":a=moment(parseInt(t,10)).unix();break;default:a=moment(t,n).format("YYYYMMDD")}else a=new Date(t).getTime();return a},f=function(e,t){this.node=e,this.content=this.originalContent=e.innerHTML,this.hidden=!1,this.index=this.node.dataIndex=t,this.originalContent=this.content};f.prototype.setContent=function(e){this.content=this.node.innerHTML=e};var g=function(e,t){s(e)?(this.node=d("tr"),l(e,function(e,t){this.node.appendChild(d("td",{html:e}))},this)):(this.node=e,void 0!==t&&(this.isHeader="THEAD"===e.parentNode.nodeName)),this.isHeader||void 0===t||(this.index=this.node.dataIndex=t-1),this.cells=[].slice.call(this.node.cells).map(function(e,t){return new f(e,t,this)},this)},b=function(e,t,n){this.node=e,"string"==typeof e&&(this.node=document.querySelector(e)),t&&this.build(t),this.rows=[].slice.call(this.node.rows).map(function(e,t){return new g(e,t,this)},this),this.body=this.node.tBodies[0],this.body||(this.body=d("tbody"),this.node.appendChild(this.body)),this.rows.length&&(this.rows[0].isHeader?(this.hasHeader=!0,this.header=this.rows[0],this.head=this.header.node.parentNode,this.rows.shift(),n.config.sortable&&l(this.header.cells,function(e){u.add(e.node,n.config.classes.sorter)})):this.addHeader())};b.prototype={build:function(e){var t=!1,n=!1;if(e.headings){t=d("thead");var a=d("tr");l(e.headings,function(e){var t=d("th",{html:e});a.appendChild(t)}),t.appendChild(a)}e.data&&e.data.length&&(n=d("tbody"),l(e.data,function(e){var t=d("tr");l(e,function(e){var n=d("td",{html:e});t.appendChild(n)}),n.appendChild(t)})),t&&(null!==this.node.tHead&&this.node.removeChild(this.node.tHead),this.node.appendChild(t)),n&&(this.node.tBodies.length&&this.node.removeChild(this.node.tBodies[0]),this.node.appendChild(n))},addHeader:function(){var e=d("thead"),t=d("tr");l(this.rows[0].cells,function(e){t.appendChild(d("td"))}),e.appendChild(t),this.head=e,this.header=new g(t,1),this.hasHeader=!0},addRow:function(e,t,n){if(e instanceof g)return this.rows.splice(t||0,0,e),this.hasHeader||this.addHeader(),n&&this.update(),e},removeRow:function(e,t){e instanceof g&&(this.rows.splice(this.rows.indexOf(e),1),t&&this.update())},update:function(e){l(this.rows,function(e,t){e.index=e.node.dataIndex=t})}};var v=function(e,t){this.instance=e,this.parent=t};v.prototype={render:function(e){var t=this,n=t.instance,a=n.config;if(e=e||n.totalPages,h(t.parent,t.isIE),e>1){var s="pager",i=d("ul"),r=n.onFirstPage?1:n.currentPage-1,o=n.onlastPage?e:n.currentPage+1;a.firstLast&&i.appendChild(t.button(s,1,a.firstText)),a.nextPrev&&i.appendChild(t.button(s,r,a.prevText));var c=t.truncate();l(c,function(e){i.appendChild(e)}),a.nextPrev&&i.appendChild(t.button(s,o,a.nextText)),a.firstLast&&i.appendChild(t.button(s,e,a.lastText)),t.parent.appendChild(i)}},truncate:function(){var e,t=this,n=t.instance.config,a=2*n.pagerDelta,s=t.instance.currentPage,i=s-n.pagerDelta,r=s+n.pagerDelta,o=t.instance.totalPages,d=[],c=[];if(n.truncatePager){s<4-n.pagerDelta+a?r=3+a:s>o-(3-n.pagerDelta+a)&&(i=o-(2+a));for(var h=1;h<=o;h++)(1==h||h==o||h>=i&&h<=r)&&d.push(h);l(d,function(a){e&&(a-e==2?c.push(t.button("",e+1,e+1)):a-e!=1&&c.push(t.button(n.classes.ellipsis,0,n.ellipsisText,!0))),c.push(t.button(a==s?"active":"",a,a)),e=a})}else l(o,function(e){c.push(t.button(e==s?"active":"",e,e))});return c},button:function(e,t,n,a){return d("li",{class:e,html:a?"<span>"+n+"</span>":'<a href="#" data-page="'+t+'">'+n+"</a>"})}};var m=function(e){this.instance=e};m.prototype={render:function(e){var t=this.instance;if(e=e||t.currentPage,h(t.table.body),!(e<1||e>t.totalPages)){var n=t.table.header,a=document.createDocumentFragment();t.table.hasHeader&&(h(n.node),l(n.cells,function(e){e.hidden||n.node.appendChild(e.node)})),t.pages.length&&l(t.pages[e-1],function(e){h(e.node),l(e.cells,function(t){t.hidden||e.node.appendChild(t.node)}),a.append(e.node)}),t.table.body.appendChild(a),l(t.pagers,function(e){e.render()}),t.getInfo(),t.emit("datatable.rows.render")}},paginate:function(){var e=this.instance.config,t=this.instance.table.rows,n=this.instance;n.searching&&n.searchData&&(t=n.searchData),n.pages=t.map(function(n,a){return a%e.perPage==0?t.slice(a,a+e.perPage):null}).filter(function(e){return e}),n.totalPages=n.pages.length},add:function(e,t){if(s(e))return t=t||0,s(e[0])?(l(e,function(e){e=this.instance.table.addRow(new g(e,this.instance.table.rows.length+1),t)},this),this.instance.table.update()):e=this.instance.table.addRow(new g(e,this.instance.table.rows.length+1),t,!0),this.instance.update(),e},remove:function(e){var t=!1,n=this.instance;if(s(e)){for(var a=e.length-1;a>=0;a--)n.table.removeRow(this.get(e[a]));n.table.update(),n.update()}else if(t=this.get(e))return n.table.removeRow(t,!0),n.update(),t},get:function(e){var t=this.instance.table.rows;if(e instanceof g||e instanceof Element){for(var n=0;n<t.length;n++)if(t[n].node===e||t[n]===e){e=t[n];break}}else e=t[e];return e}};var w=function(e){this.instance=e};w.prototype={sort:function(e,t){var n=this.instance;if(e=e||0,t=t||(t=n.lastDirection&&"asc"===n.lastDirection?"desc":"asc"),e<0||e>n.table.header.cells.length-1)return!1;var a=n.table.header.cells[e].node,s=n.table.rows;n.searching&&n.searchData&&(s=n.searchData),n.lastHeading&&u.remove(n.lastHeading,n.lastDirection),n.lastDirection&&u.remove(a,n.lastDirection),u.add(a,t);var i,r;a.hasAttribute("data-type")&&"date"===a.getAttribute("data-type")&&(i=!1,(r=a.hasAttribute("data-format"))&&(i=a.getAttribute("data-format"))),s.sort(function(n,a){return n=n.cells[e].content,a=a.cells[e].content,r?(n=p(n,i),a=p(a,i)):(n=n.replace(/(\$|\,|\s|%)/g,""),a=a.replace(/(\$|\,|\s|%)/g,"")),n=isNaN(n)?n:parseInt(n,10),a=isNaN(a)?a:parseInt(a,10),"asc"===t?n>a:n<a}),n.table.update(),n.update(),n.lastHeading=a,n.lastDirection=t,n.emit("datatable.columns.sort",t,e,a),u.remove(a,"loading")},filter:function(e,t){this.instance.search(t,e)},order:function(e){var t,n=this.instance,a=n.table.header,i=n.table.rows;s(e)&&(n.table.hasHeader&&(t=[],l(e,function(e,n){t[n]=a.cells[e],t[n].index=t[n].node.dataIndex=n,a.node.appendChild(t[n].node)}),a.cells=t),l(i,function(n){t=[],l(e,function(e,a){t[a]=n.cells[e],t[a].index=t[a].node.dataIndex=a,n.node.appendChild(t[a].node)}),n.cells=t}),n.update(),n.emit("datatable.columns.order",e))},hide:function(e){var t=this.instance,n=t.table.header,a=t.table.rows;isNaN(e)||(e=[e]);for(var s=0;s<e.length;s++)l(n.cells,function(t){e[s]==t.index&&(t.hidden=!0)}),l(a,function(t){l(t.cells,function(t){e[s]==t.index&&(t.hidden=!0)})});t.update(),t.emit("datatable.columns.hide",e)},show:function(e){var t=this.instance,n=t.table.header,a=t.table.rows;isNaN(e)||(e=[e]);for(var s=0;s<e.length;s++)l(n.cells,function(t){e[s]==t.index&&(t.hidden=!1)}),l(a,function(t){l(t.cells,function(t){e[s]==t.index&&(t.hidden=!1)})});t.update(),t.emit("datatable.columns.show",e)},visible:function(e){var t,n=this.instance.table.header;return void 0===e&&(e=n.cells.map(function(e){return e.index})),isNaN(e)?s(e)&&(t=[],l(e,function(e){t.push(!n.cells[e].hidden)})):t=!n.cells[e].hidden,t},add:function(e){var t=this.instance;if(a(e)){if(r(e,"heading")){var n=new f(d("th"),t.table.header.cells.length);n.setContent(e.heading),t.table.header.node.appendChild(n.node),t.table.header.cells.push(n)}r(e,"data")&&s(e.data)&&l(t.table.rows,function(t,n){var a=new f(d("td"),t.cells.length);a.setContent(e.data[n]||""),t.node.appendChild(a.node),t.cells.push(a)})}this.fix(),t.update()},remove:function(){},fix:function(){l(this.instance.columnWidths,function(e,t){var n=e/this.instance.rect.width*100;this.instance.table.header.cells[t].node.style.width=n+"%"},this)}};var y=function(e,t){if(this.config=o(n,t),this.config.ajax){var a=this,s=this.config.ajax;this.request=new XMLHttpRequest,c(this.request,"load",function(t){if(4===a.request.readyState&&200===a.request.status){var n={};n.data=s.load?s.load.call(a,a.request):a.request.responseText,n.type="json",s.content&&s.content.type&&(n.type=s.content.type,n=o(n,s.content)),a.table=new b(e,n.data,a),a.init()}}),this.request.open("GET","string"==typeof s?a.config.ajax:a.config.ajax.url),this.request.send()}else this.config.data?this.table=new b(e,this.config.data,this):this.table=new b(e,!1,this),this.init()};return y.prototype={init:function(){if(!this.initialised){var e=this,t=e.config;e.isIE=!!/(msie|trident)/i.test(navigator.userAgent),e.currentPage=1,e.onFirstPage=!0,e.onLastPage=!1,e.rows().paginate(),e.totalPages=e.pages.length,e.render(),t.fixedColumns&&e.columns().fix(),t.plugins&&l(t.plugins,function(t,n){void 0!==e[n]&&"function"==typeof e[n]&&(e[n]=e[n](e,t,{each:l,extend:o,isObject:a,classList:u,createElement:d}),t.enabled&&e[n].init&&"function"==typeof e[n].init&&e[n].init())}),t.columns&&(e.selectedColumns=[],e.columnRenderers=[],l(t.columns,function(n){s(n.select)||(n.select=[n.select]),r(n,"render")&&"function"==typeof n.render&&(e.selectedColumns=e.selectedColumns.concat(n.select),e.columnRenderers.push({columns:n.select,renderer:n.render})),e.table.hasHeader&&l(n.select,function(a){var s=e.table.header.cells[a];n.type&&s.node.setAttribute("data-type",n.type),n.format&&s.node.setAttribute("data-format",n.format),r(n,"sortable")&&(s.node.setAttribute("data-sortable",n.sortable),!1===n.sortable&&u.remove(s.node,t.classes.sorter)),r(n,"hidden")&&!1!==n.hidden&&e.columns().hide(a),r(n,"sort")&&1===n.select.length&&e.columns().sort(n.select[0],n.sort)})}),e.selectedColumns.length&&l(e.table.rows,function(t){l(t.cells,function(n){e.selectedColumns.indexOf(n.index)>-1&&l(e.columnRenderers,function(a){a.columns.indexOf(n.index)>-1&&n.setContent(a.renderer.call(e,n.content,n,t))})})})),e.rows().render(),e.bindEvents(),e.initialised=!0,setTimeout(function(){e.emit("datatable.init")},10)}},bindEvents:function(){var e=this,t=e.config;c(e.wrapper,"mousedown",function(e){1===e.which&&t.sortable&&"TH"===e.target.nodeName&&u.add(e.target,"loading")}),c(e.wrapper,"click",function(n){var a=n.target;if(a.hasAttribute("data-page")&&(n.preventDefault(),e.page(parseInt(a.getAttribute("data-page"),10))),t.sortable&&"TH"===a.nodeName){if(a.hasAttribute("data-sortable")&&"false"===a.getAttribute("data-sortable"))return!1;n.preventDefault(),e.columns().sort(a.dataIndex,u.contains(a,"asc")?"desc":"asc")}}),t.perPageSelect&&c(e.wrapper,"change",function(n){"SELECT"===n.target.nodeName&&u.contains(n.target,t.classes.selector)&&(n.preventDefault(),e.config.perPage=parseInt(n.target.value,10),e.update())}),t.searchable&&c(e.wrapper,"keyup",function(n){"INPUT"===n.target.nodeName&&u.contains(n.target,t.classes.input)&&(n.preventDefault(),e.search(n.target.value))}),t.sortable&&c(e.wrapper,"mousedown",function(e){"TH"===e.target.nodeName&&e.preventDefault()})},render:function(){if(!this.rendered){var e=this,t=e.config;this.table.hasHeader&&t.fixedColumns&&(this.columnWidths=this.table.header.cells.map(function(e){return e.node.offsetWidth})),e.wrapper=d("div",{class:t.classes.wrapper});var n=["<div class='",t.classes.top,"'>",t.layout.top,"</div>","<div class='",t.classes.container,"'></div>","<div class='",t.classes.bottom,"'>",t.layout.bottom,"</div>"].join("");if(n=n.replace("{info}","<div class='"+t.classes.info+"'></div>"),t.perPageSelect){var a=["<div class='",t.classes.dropdown,"'>","<label>",t.labels.perPage,"</label>","</div>"].join(""),s=d("select",{class:t.classes.selector});l(t.perPageSelect,function(e){var n=e===t.perPage,a=new Option(e,e,n,n);s.add(a)}),a=a.replace("{select}",s.outerHTML),n=n.replace("{select}",a)}else n=n.replace("{select}","");if(t.searchable){var i=["<div class='",t.classes.search,"'>","<input class='",t.classes.input,"' placeholder='",t.labels.placeholder,"' type='text'>","</div>"].join("");n=n.replace("{search}",i)}else n=n.replace("{search}","");e.table.node.classList.add(t.classes.table),l(n.match(/\{pager\}/g),function(e,a){n=n.replace("{pager}",d("div",{class:t.classes.pagination}).outerHTML)}),e.wrapper.innerHTML=n,e.pagers=[].slice.call(e.wrapper.querySelectorAll("."+t.classes.pagination)),l(e.pagers,function(t,n){e.pagers[n]=new v(e,t)}),e.container=e.wrapper.querySelector("."+t.classes.container),e.labels=e.wrapper.querySelectorAll("."+t.classes.info),e.table.node.parentNode.replaceChild(e.wrapper,e.table.node),e.container.appendChild(e.table.node),e.rect=e.table.node.getBoundingClientRect(),e.rendered=!0}},update:function(){this.rows().paginate(),this.rows().render(),this.emit("datatable.update")},getInfo:function(){var e,t=0,n=0,a=0;if(this.totalPages&&(a=(n=(t=this.currentPage-1)*this.config.perPage)+this.pages[t].length,n+=1,e=this.searching?this.searchData.length:this.table.rows.length),this.labels.length&&this.config.labels.info.length){var s=this.config.labels.info.replace("{start}",n).replace("{end}",a).replace("{page}",this.currentPage).replace("{pages}",this.totalPages).replace("{rows}",e);l([].slice.call(this.labels),function(t){t.innerHTML=e?s:""})}},search:function(e,t){var n=this;if(e=e.toLowerCase(),n.currentPage=1,n.searching=!0,n.searchData=[],!e.length)return n.searching=!1,u.remove(n.wrapper,"search-results"),n.update(),!1;l(n.table.rows,function(a){var s=n.searchData.indexOf(a)>-1;void 0!==t?l(a.cells,function(i){void 0===t||i.index!=t||s||i.content.toLowerCase().indexOf(e)>=0&&n.searchData.push(a)}):e.split(" ").reduce(function(e,t){for(var s=!1,i=0;i<a.cells.length;i++)if(a.cells[i].content.toLowerCase().indexOf(t)>-1){(!a.cells[i].hidden||a.cells[i].hidden&&n.config.search.includeHiddenColumns)&&(s=!0);break}return e&&s},!0)&&!s&&n.searchData.push(a)}),u.add(n.wrapper,"search-results"),n.searchData.length?n.update():(u.remove(n.wrapper,"search-results"),n.setMessage(n.config.labels.noRows)),this.emit("datatable.search",e,this.searchData)},page:function(e){return e!=this.currentPage&&(isNaN(e)||(this.currentPage=parseInt(e,10)),this.onFirstPage=1===this.currentPage,this.onLastPage=this.currentPage===this.totalPages,!(e>this.totalPages||e<0)&&(this.rows().render(e),void this.emit("datatable.page",e)))},import:function(e){var t=this,n=!1,s={lineDelimiter:"\n",columnDelimiter:","};if(!a(e))return!1;if((e=o(s,e)).data.length||a(e.data)){if("csv"===e.type){n={data:[]};var r=e.data.split(e.lineDelimiter);r.length&&(e.headings&&(n.headings=r[0].split(e.columnDelimiter),r.shift()),l(r,function(t,a){n.data[a]=[];var s=t.split(e.columnDelimiter);s.length&&l(s,function(e){n.data[a].push(e)})}))}else if("json"===e.type){var d=i(e.data);d?(n={headings:[],data:[]},l(d,function(e,t){n.data[t]=[],l(e,function(e,a){n.headings.indexOf(a)<0&&n.headings.push(a),n.data[t].push(e)})})):console.warn("That's not valid JSON!")}a(e.data)&&(n=e.data),n&&(l(n.headings,function(e,n){t.table.header.cells[n].setContent(e)}),this.rows().add(n.data))}return!1},setMessage:function(e){var t=1;this.table.rows.length&&(t=this.table.rows[0].cells.length);var n=d("tr",{html:'<td class="dataTables-empty" colspan="'+t+'">'+e+"</td>"});h(this.table.body),this.table.body.appendChild(n)},columns:function(){return new w(this)},rows:function(){return new m(this)},on:function(e,t){this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t)},off:function(e,t){this.events=this.events||{},e in this.events!=!1&&this.events[e].splice(this.events[e].indexOf(t),1)},emit:function(e){if(this.events=this.events||{},e in this.events!=!1)for(var t=0;t<this.events[e].length;t++)this.events[e][t].apply(this,Array.prototype.slice.call(arguments,1))},destroy:function(){var e=this,n=e.config,a=e.table;u.remove(a.node,n.classes.table),l(a.header.cells,function(e){e.node.style.width="",u.remove(e.node,n.classes.sorter)});var s=t.createDocumentFragment();h(a.body),l(a.rows,function(e){s.appendChild(e.node)}),a.body.appendChild(s),this.wrapper.parentNode.replaceChild(a.node,this.wrapper),this.rendered=!1,this.initialised=!1}},y.extend=function(e,t){"function"==typeof t?y.prototype[e]=t:y[e]=t},y});